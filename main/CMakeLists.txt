set(COMPONENT_ADD_INCLUDEDIRS "")
set(COMPONENT_SRCS "main.cpp" "Config.cpp" "Beacon.cpp" "Switches.cpp" "TinyGPS++.cpp" "GPSCnx.cpp" "LED.cpp" "SPort.cpp" "Jeti.cpp" "JetiScreen.cpp")

if(CONFIG_IDF_TARGET_ESP32)
  list(APPEND COMPONENT_SRCS "BLEConfig.cpp")
  set(ulp_sources ../ulp/ulp.S)
elseif(CONFIG_IDF_TARGET_ESP32S2)
  set(ulp_sources ../ulp_riscv/main.c)
  if(CONFIG_USB_MSC_ENABLED)
    list(APPEND COMPONENT_SRCS "msc_disk.cpp")
  endif()
endif()

register_component()
if(NOT CONFIG_IDF_TARGET_ESP32C3)
set(ulp_app_name ulp_${COMPONENT_NAME})
set(ulp_exp_dep_srcs "LED.cpp" "GPSCnx.cpp")

ulp_embed_binary(${ulp_app_name} "${ulp_sources}" "${ulp_exp_dep_srcs}")
endif()
